<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bishop - Your Reading Buddy! ü§ñ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --blue-light: #e3f2fd;
            --blue-main: #2196f3;
            --blue-dark: #1565c0;
            --blue-accent: #64b5f6;
            --white: #ffffff;
            --gray-light: #f5f5f5;
        }

        body {
            font-family: 'Comic Sans MS', 'Chalkboard', 'Comic Neue', cursive, sans-serif;
            background: linear-gradient(135deg, var(--blue-light) 0%, var(--blue-accent) 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* Header with Bishop */
        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .bishop-avatar {
            width: 120px;
            height: 120px;
            background: var(--blue-dark);
            border-radius: 50%;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            border: 4px solid var(--white);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .header h1 {
            color: var(--blue-dark);
            font-size: 2em;
            text-shadow: 2px 2px 0 var(--white);
        }

        .header p {
            color: var(--blue-dark);
            font-size: 1.2em;
        }

        /* Mode Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .tab-btn {
            padding: 15px 30px;
            font-size: 1.2em;
            font-family: inherit;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            background: var(--white);
            color: var(--blue-dark);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .tab-btn:hover {
            transform: scale(1.05);
        }

        .tab-btn.active {
            background: var(--blue-dark);
            color: var(--white);
        }

        /* Main Content Area */
        .content-area {
            background: var(--white);
            border-radius: 30px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            min-height: 400px;
        }

        /* Chat Mode */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 400px;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            max-width: 80%;
            padding: 15px 20px;
            border-radius: 20px;
            font-size: 1.1em;
            line-height: 1.4;
        }

        .message.bishop {
            background: var(--blue-light);
            color: var(--blue-dark);
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }

        .message.user {
            background: var(--blue-dark);
            color: var(--white);
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }

        .chat-input-area {
            display: flex;
            gap: 10px;
            padding-top: 15px;
            border-top: 2px solid var(--blue-light);
        }

        .chat-input {
            flex: 1;
            padding: 15px 20px;
            font-size: 1.1em;
            font-family: inherit;
            border: 3px solid var(--blue-accent);
            border-radius: 25px;
            outline: none;
        }

        .chat-input:focus {
            border-color: var(--blue-dark);
        }

        .send-btn {
            padding: 15px 30px;
            font-size: 1.2em;
            font-family: inherit;
            background: var(--blue-dark);
            color: var(--white);
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .send-btn:hover {
            transform: scale(1.05);
        }

        /* Reading Mode */
        .reading-container {
            text-align: center;
        }

        .reading-text {
            font-size: 2em;
            line-height: 2;
            padding: 30px;
            background: var(--gray-light);
            border-radius: 20px;
            margin-bottom: 20px;
        }

        .reading-text .word {
            display: inline-block;
            padding: 5px 10px;
            margin: 5px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .reading-text .word:hover {
            background: var(--blue-light);
        }

        .reading-text .word.highlight {
            background: var(--blue-main);
            color: var(--white);
            transform: scale(1.2);
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.4);
        }

        .reading-text .word.completed {
            color: var(--blue-dark);
        }

        .reading-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .control-btn {
            padding: 15px 25px;
            font-size: 1.1em;
            font-family: inherit;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.2s;
            background: var(--blue-accent);
            color: var(--white);
        }

        .control-btn:hover {
            transform: scale(1.05);
            background: var(--blue-dark);
        }

        .control-btn.active {
            background: var(--blue-dark);
        }

        .speed-label {
            font-size: 1.1em;
            color: var(--blue-dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Word Quiz */
        .quiz-container {
            display: none;
            background: var(--blue-light);
            border-radius: 20px;
            padding: 25px;
            margin-top: 20px;
            text-align: center;
        }

        .quiz-container.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .quiz-question {
            font-size: 1.4em;
            color: var(--blue-dark);
            margin-bottom: 20px;
        }

        .quiz-word {
            font-size: 1.8em;
            font-weight: bold;
            color: var(--blue-main);
            margin: 10px 0 20px;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quiz-option {
            padding: 15px 25px;
            font-size: 1.2em;
            font-family: inherit;
            border: 3px solid var(--blue-accent);
            border-radius: 15px;
            background: var(--white);
            cursor: pointer;
            transition: all 0.2s;
        }

        .quiz-option:hover {
            background: var(--blue-accent);
            color: var(--white);
        }

        .quiz-option.correct {
            background: #4caf50;
            color: var(--white);
            border-color: #4caf50;
        }

        .quiz-option.wrong {
            background: #f44336;
            color: var(--white);
            border-color: #f44336;
        }

        .quiz-feedback {
            font-size: 1.3em;
            margin-top: 15px;
            padding: 10px;
            border-radius: 10px;
        }

        .hidden {
            display: none;
        }

        /* Progress Stars */
        .progress-area {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            background: var(--blue-light);
            border-radius: 15px;
        }

        .stars {
            font-size: 2em;
        }

        .progress-text {
            color: var(--blue-dark);
            font-size: 1.1em;
        }

        /* Help Button */
        .help-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--blue-dark);
            color: var(--white);
            font-size: 1.5em;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="bishop-avatar" id="bishopAvatar">ü§ñ</div>
            <h1>Bishop</h1>
            <p>Your Reading Buddy! üìö</p>
        </div>

        <!-- Mode Tabs -->
        <div class="tabs">
            <button class="tab-btn active" onclick="showMode('chat')">üí¨ Chat</button>
            <button class="tab-btn" onclick="showMode('read')">üìñ Read</button>
        </div>

        <!-- Content Area -->
        <div class="content-area">
            <!-- Chat Mode -->
            <div id="chatMode" class="chat-container">
                <div class="chat-messages" id="chatMessages">
                    <div class="message bishop">
                        Hi Krishna! üëã I'm Bishop, your robot buddy!<br><br>
                        Want to read a story with me? Or talk about robots? ü§ñ
                    </div>
                </div>
                <div class="chat-input-area">
                    <input type="text" class="chat-input" id="chatInput" placeholder="Type here..." onkeypress="handleKeyPress(event)">
                    <button class="send-btn" onclick="sendMessage()">Send! üöÄ</button>
                </div>
            </div>

            <!-- Reading Mode -->
            <div id="readMode" class="reading-container hidden">
                <div class="reading-controls">
                    <span class="speed-label">Speed:</span>
                    <button class="control-btn active" onclick="setSpeed('slow')" id="slowBtn">üê¢ Slow</button>
                    <button class="control-btn" onclick="setSpeed('normal')" id="normalBtn">üêá Normal</button>
                </div>

                <div class="reading-text" id="readingText">
                    <!-- Words will be inserted here -->
                </div>

                <div class="reading-controls">
                    <button class="control-btn" onclick="startReading()">‚ñ∂Ô∏è Read to Me!</button>
                    <button class="control-btn" onclick="stopReading()">‚èπÔ∏è Stop</button>
                    <button class="control-btn" onclick="newStory()">üìñ New Story</button>
                </div>

                <!-- Word Quiz -->
                <div class="quiz-container" id="quizContainer">
                    <div class="quiz-question">ü§î What does this word mean?</div>
                    <div class="quiz-word" id="quizWord"></div>
                    <div class="quiz-options" id="quizOptions">
                        <!-- Options inserted by JS -->
                    </div>
                    <div class="quiz-feedback" id="quizFeedback"></div>
                </div>

                <!-- Progress -->
                <div class="progress-area">
                    <div class="stars" id="stars">‚≠ê‚≠ê‚≠ê</div>
                    <div class="progress-text">Words learned today: <span id="wordsLearned">0</span></div>
                </div>
            </div>
        </div>
    </div>

    <button class="help-btn" onclick="showHelp()">‚ùì</button>

    <script>
        // State
        let currentMode = 'chat';
        let readingSpeed = 'slow';
        let isReading = false;
        let currentWordIndex = 0;
        let wordsLearned = 0;
        let speechSynth = window.speechSynthesis;
        let currentUtterance = null;

        // Robot stories for reading practice
        const stories = [
            {
                text: "The robot can spin. It goes round and round. Fast or slow. We can use it to mix things. Like a smoothie!",
                words: {
                    "robot": { meaning: "A machine that can move and do things", options: ["A machine that moves", "A type of fruit", "A big cat"] },
                    "spin": { meaning: "To turn around very fast", options: ["To turn around fast", "To sleep", "To eat"] },
                    "smoothie": { meaning: "A yummy blended drink", options: ["A blended drink", "A type of robot", "A fast car"] }
                }
            },
            {
                text: "A motor can spin. It is like muscles for a robot. The motor makes things go. Push the button to start!",
                words: {
                    "motor": { meaning: "The part that makes a robot move", options: ["Makes things move", "A type of food", "A color"] },
                    "muscles": { meaning: "What helps you move your arms", options: ["Help you move", "A type of plant", "A robot name"] },
                    "button": { meaning: "You push it to make things happen", options: ["You push it", "You eat it", "You wear it"] }
                }
            },
            {
                text: "The robot has sensors. Sensors help it see and feel. Like your eyes and hands! The robot is smart.",
                words: {
                    "sensors": { meaning: "Parts that help a robot feel and see", options: ["Help robots sense", "A type of fruit", "Robot shoes"] },
                    "smart": { meaning: "Very clever and good at thinking", options: ["Very clever", "Very slow", "Very small"] }
                }
            }
        ];

        let currentStory = stories[0];

        // Mode switching
        function showMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            document.getElementById('chatMode').classList.toggle('hidden', mode !== 'chat');
            document.getElementById('readMode').classList.toggle('hidden', mode !== 'read');
            
            if (mode === 'read') {
                loadStory();
            }
        }

        // Chat functions
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;

            addMessage(message, 'user');
            input.value = '';

            // Simple bot response
            setTimeout(() => {
                const response = getBishopResponse(message);
                addMessage(response, 'bishop');
                speakText(response);
            }, 500);
        }

        function handleKeyPress(e) {
            if (e.key === 'Enter') sendMessage();
        }

        function addMessage(text, sender) {
            const container = document.getElementById('chatMessages');
            const msg = document.createElement('div');
            msg.className = `message ${sender}`;
            msg.textContent = text;
            container.appendChild(msg);
            container.scrollTop = container.scrollHeight;
        }

        function getBishopResponse(msg) {
            const lower = msg.toLowerCase();
            if (lower.includes('robot')) {
                return "Robots are SO cool! ü§ñ They can spin, move, and help us do things!";
            } else if (lower.includes('hello') || lower.includes('hi')) {
                return "Hello friend! üëã Ready to learn about robots?";
            } else if (lower.includes('read')) {
                return "Click the READ tab up top! We can read together! üìñ";
            } else if (lower.includes('smoothie') || lower.includes('mango')) {
                return "Yum! ü•≠ Mango smoothies are the BEST! Our robot will make them!";
            } else {
                return "That's cool! Tell me more! What do you want to build? üîß";
            }
        }

        // Reading functions
        function loadStory() {
            const container = document.getElementById('readingText');
            const words = currentStory.text.split(' ');
            container.innerHTML = words.map((word, i) => 
                `<span class="word" data-index="${i}" onclick="wordClicked('${word.replace(/[^a-zA-Z]/g, '').toLowerCase()}')">${word}</span>`
            ).join(' ');
        }

        function setSpeed(speed) {
            readingSpeed = speed;
            document.getElementById('slowBtn').classList.toggle('active', speed === 'slow');
            document.getElementById('normalBtn').classList.toggle('active', speed === 'normal');
        }

        function startReading() {
            if (isReading) return;
            isReading = true;
            currentWordIndex = 0;
            readNextWord();
        }

        function stopReading() {
            isReading = false;
            speechSynth.cancel();
            document.querySelectorAll('.word').forEach(w => w.classList.remove('highlight'));
        }

        function readNextWord() {
            if (!isReading) return;

            const words = document.querySelectorAll('.word');
            if (currentWordIndex >= words.length) {
                isReading = false;
                // Show quiz for a word
                showWordQuiz();
                return;
            }

            // Remove previous highlights
            words.forEach(w => w.classList.remove('highlight'));
            
            // Highlight current word
            const currentWord = words[currentWordIndex];
            currentWord.classList.add('highlight');
            currentWord.classList.add('completed');

            // Speak the word
            const text = currentWord.textContent;
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.rate = readingSpeed === 'slow' ? 0.6 : 0.9;
            utterance.pitch = 1.1;
            
            utterance.onend = () => {
                currentWordIndex++;
                const delay = readingSpeed === 'slow' ? 400 : 200;
                setTimeout(readNextWord, delay);
            };

            speechSynth.speak(utterance);
        }

        function speakText(text) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.rate = 0.9;
            utterance.pitch = 1.1;
            speechSynth.speak(utterance);
        }

        function wordClicked(word) {
            if (currentStory.words[word]) {
                showWordQuiz(word);
            }
        }

        function showWordQuiz(specificWord) {
            const quizWords = Object.keys(currentStory.words);
            const word = specificWord || quizWords[Math.floor(Math.random() * quizWords.length)];
            const wordData = currentStory.words[word];
            if (!wordData) return;

            document.getElementById('quizWord').textContent = word.toUpperCase();
            
            const optionsContainer = document.getElementById('quizOptions');
            optionsContainer.innerHTML = '';
            
            // Shuffle options
            const shuffled = [...wordData.options].sort(() => Math.random() - 0.5);
            
            shuffled.forEach(option => {
                const btn = document.createElement('button');
                btn.className = 'quiz-option';
                btn.textContent = option;
                btn.onclick = () => checkAnswer(btn, option === wordData.options[0], word);
                optionsContainer.appendChild(btn);
            });

            document.getElementById('quizFeedback').textContent = '';
            document.getElementById('quizContainer').classList.add('show');
            
            speakText(`What does ${word} mean?`);
        }

        function checkAnswer(btn, isCorrect, word) {
            const feedback = document.getElementById('quizFeedback');
            
            if (isCorrect) {
                btn.classList.add('correct');
                feedback.textContent = "üéâ YES! Great job!";
                feedback.style.background = '#c8e6c9';
                wordsLearned++;
                document.getElementById('wordsLearned').textContent = wordsLearned;
                updateStars();
                speakText("Yes! Great job!");
            } else {
                btn.classList.add('wrong');
                feedback.textContent = "Not quite! Try again! üí™";
                feedback.style.background = '#ffcdd2';
                speakText("Not quite! Try again!");
            }

            // Hide quiz after delay if correct
            if (isCorrect) {
                setTimeout(() => {
                    document.getElementById('quizContainer').classList.remove('show');
                }, 2000);
            }
        }

        function updateStars() {
            const stars = document.getElementById('stars');
            const count = Math.min(5, Math.floor(wordsLearned / 2) + 3);
            stars.textContent = '‚≠ê'.repeat(count);
        }

        function newStory() {
            stopReading();
            const currentIndex = stories.indexOf(currentStory);
            currentStory = stories[(currentIndex + 1) % stories.length];
            loadStory();
            document.getElementById('quizContainer').classList.remove('show');
        }

        function showHelp() {
            alert("ü§ñ Bishop's Reading Buddy!\n\nüí¨ CHAT - Talk to Bishop about robots!\n\nüìñ READ - Read stories with Bishop!\n‚Ä¢ Words light up as Bishop reads\n‚Ä¢ Click any word to learn it\n‚Ä¢ Answer the quiz to earn stars!\n\nüê¢ Slow = Practice mode\nüêá Normal = Fluency mode");
        }

        // Initialize
        loadStory();
    </script>
</body>
</html>
